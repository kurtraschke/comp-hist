SRCS = `find ./src/ -type f| sed /CVS.*/d`

all: dump vcg biblio info html chml browser dot dbm

dot: $(SRCS)
	@PERL@ -w scripts/parsech-split/dot $(SRCS) >comp-history.dot

dot.ps: dot
	@DOT@ -Tps comp-history.dot >comp-history.dot.ps

clean:
	rm -rf *.html *.css comp-history* *.aux *.log *.ps bibliography *.pdf information dump *xml pod2html-* parsech_dbm
	@echo "That's it for the normal cleanup. However, if you've built the browser, you probably want to cd to scripts/browser, and make clean there too.  CVS users can also run make cvs_clean for a more comprehensive cleanup."

biblio: $(SRCS)
	@PERL@ scripts/parsech-split/biblio $(SRCS) > bibliography

info: $(SRCS)
	@PERL@ scripts/parsech-split/info $(SRCS) > information

vcg: $(SRCS)
	@PERL@ -w scripts/parsech-split/vcg $(SRCS) >comp-history.vcg 

vcg.ps: vcg
	@VCG@ comp-history.vcg -psoutput comp-history.vcg

html: $(SRCS)
	@PERL@ scripts/parsech-split/html $(SRCS) >comp-hist.html

chml: $(SRCS)
	@PERL@ scripts/parsech-split/chml $(SRCS) >comp-hist.xml

browser:
	cd scripts/browser ; ./configure ; make 

browse: browser dump
	cd scripts/browser/src ; ./browser ../../../dump

dbm: $(SRCS)
	@PERL@ scripts/parsech-split/dbm $(SRCS)

$(SRCS) :

dump: $(SRCS)
	unexpand $(SRCS) > dump

sources:
	@echo $(SRCS)

cvs_clean: clean
	rm -f config.* Makefile